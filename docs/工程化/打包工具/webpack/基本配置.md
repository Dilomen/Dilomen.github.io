## 概述

webpack 是前端当前最流行的打包工具，它可以将不同的资源进行模块打包处理。  
webpack 需要 node8.x 版本及以上的运行环境

## 安装 webpack

#### 1. 全局安装

```js
npm install webpack -g
```

#### 1. 本地安装

```js
npm install webpack webpack-cli webpack-dev-server  -D
```

#### 2. 在项目根目录下创建一个 webpack.config.js 文件，设置配置

#### 3. 在 package.json 中，编写 2 个执行指令

```js
//webpack.config.js的路径可根据自己具体更改
"scripts": {
    "build": "webpack webpack.config.js",
    "dev": "webpack-dev-server webpack.config.js"
 }
```

- 在终端输入 npm run build 就可以执行 webpack 打包
- 输入 npm run dev 就可以打开 node 支持下的 webpack 服务器

## 基本配置

以下就是一个最简单的配置

```js
const path = require("path");
module.exports = {
  mode: "development",
  entry: "./src/index.js",
  output: {
    path: path.resolve(__dirname, "build"),
  },
};
```

### entry

导入入口的配置，它支持直接**字符串**来指定路径,或者**字符串数组**和使用**对象**的形式导入单个或多个文件

```js
// string
entry: "./src/index.js";
// [string]
entry: ["./src/index.js", "./src/main.js"];
// [{string: string}]对象导入一个或一个以上的文件，并使用 key 名进行区别不同的文件
entry: {
    main: "./src/main.js",
    index: "./src/index.js"
}
```

### output

导出出口的配置，按照导入文件数量配置做对应配置  
指定的导出路径必须是**绝对路径**

```js
// 如果导入配置是单个文件
output: {
     path: __dirname + '/build',
     filename: 'index.js' // 可选，导出文件的重命名
};
// 如果导入配置是多个文件，不能指定单个指定导出名，可以使用[name]，[hash]来进行区别
output: {
    path: __dirname + '/build', // 导出路径可不变
    filename: '[name]_[hash:8].js' // 每个导出文件的名称可以使用导入配置中文件的key值和指定个数的hash值进行区别
}
```

### mode

告知 webpack 的当前环境，使其做对应的优化

mode:只有以下两个值

- 开发环境 development
- 生产环境 production

当不想写死，而根据指令来判断当前环境时，可以使用 process.env.NODE_ENV 变量

1. 首先在 package.json 中指令分别添加对应的**NODE_ENV=XX**

```json
"dev": "NODE_ENV=development webpack-dev-server",
"build": "NODE_ENV=production webpack"
```

2. 然后在 webpack.config.js 中就可以通过 process.env.NODE_ENV 来获取对应的当前环境

```js
mode: process.env.NODE_ENV;
```

### loader 和 plugin

- loader 是对源代码进行编译处理，或者修改源代码的内容，比如 sass 编译成 css，替换 js 中的部分代码

- plugin 是对整个 webpack 实例 compiler 进行处理，所以功能更加强大，能解决 loader 所不能处理的事件
