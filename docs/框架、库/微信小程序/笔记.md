### 自定义组件

新建一个 components 文件夹，然后创建一个组件文件夹如 TodoList，目录下有 4 个基本文件

json 默认配置

js 默认配置，不在是 page 的生命周期，而是 Component 的生命周期。

```js
Component({});
```

```json
{
  "component": true, // 表示是组件
  "usingComponents": {} // 可以导入别的组件
}
```

同样页面中需要引入组件，就要使用 usingComponents 先注册组件

#### 父传子

properties 是接受父组件传递的参数，包含类型限制和默认值。如果 properties 和 data 参数同名，那么 properties 会覆盖 data 内的数据

```js
Component({
  properties: {
    data: {
      type: String,
      value: "",
    },
  },
});
```

properties 的数据可通过 this.data 获取，也可以通过 this.setData({})改变，但是不会改变父组件获取页面的数据改变，子传父需要通过以下方式

#### 子传父

this.triggerEvent("自定义事件名", 传递的参数); 相当于 vue 的 emit
然后父级需要 bind 自定义事件名

```html
<TodoList text="{{1234}}" bindhandleChange="handleChange"></TodoList>
```

```js
handleChange(e) {
    console.log(e.detail); // 就可以取到子组件传过来的数据
}
```

查看用户是否给予对应权限
如果同意，对应权限为true，没有经过选择为undefined，如果拒绝则为false。无法打开获取权限对话框，需要通过openSetting来引导用户操作

```js
wx.getSetting({
  success(res) {
    const scopeAddress = res.authSetting["scope.address"];
    if (scopeAddress === true || scopeAddress === undefined) {
      // 用户拒绝过授予权限
    } else {
      wx.openSetting({
        success: (res) => {
      },
    });
  }
},
```
